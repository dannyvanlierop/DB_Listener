<html>

<head>
    <title>Socket.io Test</title>

    <!--    <script>var frontEndVar = <%= EJSvar %>;</script>   -->
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.2.0/json2html.min.js"></script> -->

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.2.0/json2html.min.js"></script>

    <script>

        //Init socket.io
        var socket = io.connect();
        
        function clientRefresh()
        {
            document.location.reload();
        }

        socket.on('disconnect', function () {
            clientRefresh();
        });

        socket.on('connect', function () {
            
        });

        socket.on('JSONforClient', function (data) {
            $("#JSONforClient").text(JSON.stringify(data,null,2));
        });

        socket.on('ServerOnlineSeconds', function (data) {
            $("#ServerOnlineSeconds").text(data);
        });

        socket.on('ServerOnlineSecondsMilli', function (data) {
            $("#ServerOnlineSecondsMilli").text(data);
        });

        socket.on('SocketMessageQueueTime', function (data) {
            $("#SocketMessageQueueTime").text(data);
        });

        socket.on('DebugMessage', function (data) {
            $("#DebugMessage").text(data);
        });

        
        


        socket.on("emitterLastChanged", function (itemValue) {
            //jQuery - Add the itemValue to item
            $("#emitterLastChanged").text(itemValue);
            //document.getElementById(itemName).innerHTML = itemValue;
        });    

        socket.on("REST-API_ESMR5_currentwatt", function (itemValue) {
            //jQuery - Add the itemValue to item
            $("#REST-API_ESMR5_currentwatt").text(itemValue);
            //document.getElementById(itemName).innerHTML = itemValue;
        });    

//        socket.on('init', function (itemName) {
//
//                $("#emitterLastChanged").text(itemName);
//                //Create emitters(listener) with @param 'itemName', value will be fetched after
//                socket.on(itemName, function (itemValue) {
//                    //jQuery - Add the itemValue to item
//                    $("#" + itemName).text(itemValue);
//                    //document.getElementById(itemName).innerHTML = itemValue;
//                });                
//            //}
//
//        });
//



    </script>

</head>
<body>

    </br><hr/>Timers :</font><hr/>
    
    <h4>ServerOnline</h4>
    <pre>Seconds                : <a id='ServerOnlineSeconds'></a></pre>
    <pre>MilliSeconds           : <a id='ServerOnlineSecondsMilli'></a></pre>
    
    <h4>SocketMessageQueue</h4>
    <pre>SocketMessageQueueTime : <a id='SocketMessageQueueTime'></a></pre>

    </br><hr/>Dynamic data (JSON)</font><hr/>
    <pre><a id='JSONforClient'></a></pre>
    </br><hr/>Dynamic data (items)</font><hr/>
    <pre>DebugMessage      : <a id='DebugMessage'></a></pre>
    <pre><a id='REST-emitterLastChanged'></a></pre>
    <pre><a id='REST-API_ESMR5_currentwatt'></a></pre>

</body>
</html>
